{% extends "layout.html" %}

{% block title %}
    Dashboard - Spotify Stats
{% endblock %}

{% block main %}
    <h2>Your Top Artists</h2>
    {% if top_artists and "items" in top_artists %}
        <ul>
        {% for artist in top_artists["items"] %}
            <li>{{ artist.name }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No data available. Try logging in with Spotify.</p>
    {% endif %}

    <h2>Your Recently Played Songs</h2>
    {% if recently_played %}
        <ul>
        {% for track in recently_played %}
            <li>
                <strong>{{ track.track.name }}</strong> by
                {% for artist in track.track.artists %}
                    {{ artist.name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
                <br>
                Played {{ track.play_count }} times
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No recent tracks found. Try playing some music on Spotify.</p>
    {% endif %}

    <h2>Total Plays Per Day</h2>
    {% for date, count in daily_listening_counts.items() %}
        <p>{{ date }}: {{ count }} listens</p>
    {% endfor %}

    
{% endblock %}
